<div class="form-container">
  <div class="form-header">
    <h3>{{ isEdit ? 'Editar Tarefa' : 'Nova Tarefa' }}</h3>
    <button type="button" class="close-btn" (click)="cancel()" title="Fechar">×</button>
  </div>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <div class="form-body">

      <div *ngIf="errorMsg" class="alert-error">
        ⚠️ {{ errorMsg }}
      </div>

      <div class="form-group">
        <label>Nome da Tarefa <span class="required">*</span></label>
        <input 
          type="text" 
          formControlName="nome" 
          placeholder="Ex: Comprar material de escritório"
          [class.input-error]="form.get('nome')?.invalid && form.get('nome')?.touched">
        
        <small class="error-text" *ngIf="form.get('nome')?.invalid && form.get('nome')?.touched">
          O nome da tarefa é obrigatório.
        </small>
      </div>

      <div class="row">
        <div class="form-group half">
          <label>Custo (R$) <span class="required">*</span></label>
          <input 
            type="text" 
            formControlName="custo" 
            placeholder="R$ 0,00"
            (input)="onCustoInput($event)"
            [class.input-error]="form.get('custo')?.invalid && form.get('custo')?.touched">
          
          <small class="error-text" *ngIf="form.get('custo')?.invalid && form.get('custo')?.touched">
            Informe um valor válido.
          </small>
        </div>

        <div class="form-group half">
          <label>Data Limite <span class="required">*</span></label>
          <input 
            type="date" 
            formControlName="dataLimite"
            [class.input-error]="form.get('dataLimite')?.invalid && form.get('dataLimite')?.touched">
          
          <small class="error-text" *ngIf="form.get('dataLimite')?.invalid && form.get('dataLimite')?.touched">
            Data é obrigatória.
          </small>
        </div>
      </div>

    </div>

    <div class="form-footer">
      <button type="button" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
      <button type="button" class="btn btn-warning" (click)="limpar()">Limpar</button>
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
        Salvar
      </button>
    </div>
  </form>
</div>